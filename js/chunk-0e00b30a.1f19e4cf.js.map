{"version":3,"sources":["webpack:///./src/views/Admin/Orders.vue","webpack:///./src/components/OrderModal.vue","webpack:///./src/components/OrderModal.vue?658e","webpack:///./src/views/Admin/Orders.vue?53cf","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/components/OrderModal.vue?4394"],"names":["class","orders","item","key","length","is_paid","$filters","date","create_at","user","email","products","product","i","title","qty","unit","currency","total","type","id","updatePaid","for","openModal","delOrderModal","order","tempOrder","ref","delOrder","pages","pagination","getOrders","tabindex","role","aria-labelledby","aria-hidden","style","data-bs-dismiss","name","tel","address","paid_date","final_total","coupon","code","props","Object","default","data","modal","mixins","modalMixin","watch","this","render","currentPage","components","Pagination","DelModal","OrderModal","inject","methods","url","$store","dispatch","$http","get","then","res","paid","put","isNew","orderComponent","$refs","orderModal","showModal","delComponent","delModal","delete","hideModal","$httpMsgState","created","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-0e00b30a.1f19e4cf.js","sourcesContent":["<template>\n  <h3 class=\"fw-bold\"><i class=\"bi bi-clock\"></i> 最近訂單</h3>\n  <div class=\"overflow-wrap mb-6\">\n    <table class=\"table-css mt-4\">\n      <thead>\n        <tr>\n          <th>購買時間</th>\n          <th>Email</th>\n          <th>購買款項</th>\n          <th>應付金額</th>\n          <th>是否付款</th>\n          <th>編輯</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-for=\"(item, key) in orders\" :key=\"key\">\n          <tr v-if=\"orders.length\" :class=\"{'text-secondary': !item.is_paid}\">\n            <td>{{ $filters.date(item.create_at) }}</td>\n            <td>{{ item.user.email }}</td>\n            <td>\n              <ul class=\"list-unstyled\">\n                <li v-for=\"(product, i) in item.products\" :key=\"i\">\n                  {{ product.product.title }} / {{ product.qty }} {{ product.product.unit }}\n                </li>\n              </ul>\n            </td>\n            <td class=\"fw-bold\">{{ $filters.currency(item.total) }}</td>\n            <td>\n              <div class=\"form-check form-switch\">\n                <input class=\"form-check-input\" type=\"checkbox\" :id=\"`paidSwitch${item.id}`\" v-model=\"item.is_paid\" @change=\"updatePaid(item)\">\n                <label class=\"form-check-label\"  :for=\"`paidSwitch${item.id}`\">\n                  <span v-if=\"item.is_paid\">已付款</span>\n                  <span v-else>未付款</span>\n                </label>\n              </div>\n            </td>\n            <td>\n              <div class=\"btn-group\">\n                <button class=\"l-btn btn--primary btn-sm\" @click=\"openModal(false, item)\">檢視</button>\n                <button class=\"l-btn btn--secondary btn-sm\" @click=\"delOrderModal(item)\">刪除</button>\n              </div>\n            </td>\n          </tr>\n        </template>\n      </tbody>\n    </table>\n  </div>\n  <OrderModal :order=\"tempOrder\" ref=\"orderModal\" />\n  <DelModal :item=\"tempOrder\" ref=\"delModal\" @del-item=\"delOrder\" />\n  <Pagination :pages=\"pagination\" @emit-page=\"getOrders\" />\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination.vue'\nimport DelModal from '@/components/DelModal.vue'\nimport OrderModal from '@/components/OrderModal.vue'\n\nexport default {\n  data () {\n    return {\n      orders: {},\n      pagination: {},\n      tempOrder: {},\n      currentPage: 1\n    }\n  },\n  components: {\n    Pagination,\n    DelModal,\n    OrderModal\n  },\n  inject: ['emitter'],\n  methods: {\n    getOrders (currentPage = 1) {\n      this.currentPage = currentPage\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders/?page=${currentPage}`\n      this.$store.dispatch('updateLoading', true)\n      this.$http.get(url)\n        .then(res => {\n          this.orders = res.data.orders\n          this.pagination = res.data.pagination\n          this.$store.dispatch('updateLoading', false)\n        })\n    },\n    updatePaid (item) {\n      this.$store.dispatch('updateLoading', true)\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders/${item.id}`\n      const paid = {\n        is_paid: item.is_paid\n      }\n      this.$http.put(url, { data: paid })\n        .then(res => {\n          this.$store.dispatch('updateLoading', false)\n          this.getOrders(this.currentPage)\n        })\n    },\n    openModal (isNew, item) {\n      this.tempOrder = { ...item }\n      this.isNew = false\n      const orderComponent = this.$refs.orderModal\n      orderComponent.showModal()\n    },\n    delOrderModal (item) {\n      this.tempOrder = { ...item }\n      const delComponent = this.$refs.delModal\n      delComponent.showModal()\n    },\n    delOrder () {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`\n      this.$http.delete(url)\n        .then(res => {\n          const delComponent = this.$refs.delModal\n          delComponent.hideModal()\n          this.getOrders(this.currentPage)\n          this.$httpMsgState(res, '刪除訂單')\n        })\n    }\n  },\n  created () {\n    this.getOrders()\n  }\n}\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog modal-md\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-primary text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>訂單編號：</span><span>{{ tempOrder.id }}</span>\n          </h5>\n        </div>\n        <div class=\"modal-body\">\n            <div class=\"mb-5\">\n              <h3 class=\"display-10 fw-bold mb-2\">用戶資料</h3>\n              <table class=\"table\">\n                <tbody v-if=\"tempOrder.user\">\n                  <tr>\n                    <th style=\"width: 100px;\">姓名</th>\n                    <td>{{ tempOrder.user.name }}</td>\n                  </tr>\n                  <tr>\n                    <th>Email</th>\n                    <td>{{ tempOrder.user.email }}</td>\n                  </tr>\n                  <tr>\n                    <th>電話</th>\n                    <td>{{ tempOrder.user.tel }}</td>\n                  </tr>\n                  <tr>\n                    <th>地址</th>\n                    <td>{{ tempOrder.user.address }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"mb-5\">\n              <h3 class=\"display-10 fw-bold mb-2\">訂單細節</h3>\n              <table class=\"table\">\n                <tbody>\n                  <tr>\n                    <th>下單時間</th>\n                    <td>{{ $filters.date(tempOrder.create_at)}}</td>\n                  </tr>\n                  <tr>\n                    <th>付款時間</th>\n                    <td>\n                      <span v-if=\"tempOrder.paid_date\">\n                        {{ $filters.date(tempOrder.paid_date) }}\n                      </span>\n                      <span v-else>時間不正確</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>付款狀態</th>\n                    <td>\n                      <strong v-if=\"tempOrder.is_paid\" class=\"text-danger\">已付款</strong>\n                      <span v-else class=\"text-muted\">尚未付款</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th>總金額</th>\n                    <td>\n                      {{ $filters.currency(tempOrder.total) }}\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div>\n              <h3 class=\"display-10 fw-bold mb-2\">選購商品</h3>\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.id\">\n                    <th>\n                      {{ item.product.title }}\n                    </th>\n                    <td>\n                      {{ item.qty }} / {{ item.product.unit }}\n                    </td>\n                    <td class=\"text-end\">\n                      {{ $filters.currency(item.final_total) }}\n                    </td>\n                    <td v-if=\"item.coupon\" class=\"text-danger\">\n                      使用優惠卷：{{ item.coupon.code }}\n                    </td>\n                    <td v-else>無使用優惠卷</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"l-btn btn--primary btn--md\" data-bs-dismiss=\"modal\">關閉</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin'\n\nexport default {\n  name: 'orderModal',\n  props: {\n    order: {\n      type: Object,\n      default () { return {} }\n    }\n  },\n  data () {\n    return {\n      modal: '',\n      tempOrder: {}\n    }\n  },\n  mixins: [modalMixin],\n  watch: {\n    order () {\n      this.tempOrder = this.order\n    }\n  }\n}\n</script>\n\n<style>\n  .modal-body th {\n    color: #666;\n  }\n</style>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=8d3930a8\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport \"./OrderModal.vue?vue&type=style&index=0&id=8d3930a8&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=1b9b0732\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OrderModal.vue?vue&type=style&index=0&id=8d3930a8&lang=css\""],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e00b30a"],{"0c78":function(t,e,c){"use strict";c.r(e);var i=c("7a23"),l=Object(i["i"])("h3",{class:"fw-bold"},[Object(i["i"])("i",{class:"bi bi-clock"}),Object(i["h"])(" 最近訂單")],-1),a={class:"overflow-wrap mb-6"},n={class:"table-css mt-4"},r=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"購買時間"),Object(i["i"])("th",null,"Email"),Object(i["i"])("th",null,"購買款項"),Object(i["i"])("th",null,"應付金額"),Object(i["i"])("th",null,"是否付款"),Object(i["i"])("th",null,"編輯")])],-1),d={class:"list-unstyled"},b={class:"fw-bold"},o={class:"form-check form-switch"},s={key:0},O={key:1},u={class:"btn-group"};function j(t,e,c,j,p,h){var m=Object(i["D"])("OrderModal"),f=Object(i["D"])("DelModal"),g=Object(i["D"])("Pagination");return Object(i["w"])(),Object(i["e"])(i["a"],null,[l,Object(i["i"])("div",a,[Object(i["i"])("table",n,[r,Object(i["i"])("tbody",null,[(Object(i["w"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(p.orders,(function(e,c){return Object(i["w"])(),Object(i["e"])(i["a"],{key:c},[p.orders.length?(Object(i["w"])(),Object(i["e"])("tr",{key:0,class:{"text-secondary":!e.is_paid}},[Object(i["i"])("td",null,Object(i["G"])(t.$filters.date(e.create_at)),1),Object(i["i"])("td",null,Object(i["G"])(e.user.email),1),Object(i["i"])("td",null,[Object(i["i"])("ul",d,[(Object(i["w"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(e.products,(function(t,e){return Object(i["w"])(),Object(i["e"])("li",{key:e},Object(i["G"])(t.product.title)+" / "+Object(i["G"])(t.qty)+" "+Object(i["G"])(t.product.unit),1)})),128))])]),Object(i["i"])("td",b,Object(i["G"])(t.$filters.currency(e.total)),1),Object(i["i"])("td",null,[Object(i["i"])("div",o,[Object(i["Q"])(Object(i["i"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return h.updatePaid(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[i["J"],e.is_paid]]),Object(i["i"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(i["w"])(),Object(i["e"])("span",s,"已付款")):(Object(i["w"])(),Object(i["e"])("span",O,"未付款"))],8,["for"])])]),Object(i["i"])("td",null,[Object(i["i"])("div",u,[Object(i["i"])("button",{class:"l-btn btn--primary btn-sm",onClick:function(t){return h.openModal(!1,e)}},"檢視",8,["onClick"]),Object(i["i"])("button",{class:"l-btn btn--secondary btn-sm",onClick:function(t){return h.delOrderModal(e)}},"刪除",8,["onClick"])])])],2)):Object(i["f"])("",!0)],64)})),128))])])]),Object(i["i"])(m,{order:p.tempOrder,ref:"orderModal"},null,8,["order"]),Object(i["i"])(f,{item:p.tempOrder,ref:"delModal",onDelItem:h.delOrder},null,8,["item","onDelItem"]),Object(i["i"])(g,{pages:p.pagination,onEmitPage:h.getOrders},null,8,["pages","onEmitPage"])],64)}var p=c("5530"),h=(c("99af"),c("1799")),m=c("6ff1"),f=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),g={class:"modal-dialog modal-md",role:"document"},w={class:"modal-content border-0"},y={class:"modal-header bg-primary text-white"},v={class:"modal-title",id:"exampleModalLabel"},k=Object(i["i"])("span",null,"訂單編號：",-1),M={class:"modal-body"},G={class:"mb-5"},$=Object(i["i"])("h3",{class:"display-10 fw-bold mb-2"},"用戶資料",-1),x={class:"table"},_={key:0},P=Object(i["i"])("th",{style:{width:"100px"}},"姓名",-1),D=Object(i["i"])("th",null,"Email",-1),C=Object(i["i"])("th",null,"電話",-1),L=Object(i["i"])("th",null,"地址",-1),E={class:"mb-5"},S=Object(i["i"])("h3",{class:"display-10 fw-bold mb-2"},"訂單細節",-1),B={class:"table"},J=Object(i["i"])("th",null,"下單時間",-1),q=Object(i["i"])("th",null,"付款時間",-1),I={key:0},U={key:1},V=Object(i["i"])("th",null,"付款狀態",-1),F={key:0,class:"text-danger"},N={key:1,class:"text-muted"},Q=Object(i["i"])("th",null,"總金額",-1),z=Object(i["i"])("h3",{class:"display-10 fw-bold mb-2"},"選購商品",-1),A={class:"table"},H=Object(i["i"])("thead",null,[Object(i["i"])("tr")],-1),K={class:"text-end"},R={key:0,class:"text-danger"},T={key:1},W=Object(i["i"])("div",{class:"modal-footer"},[Object(i["i"])("button",{type:"button",class:"l-btn btn--primary btn--md","data-bs-dismiss":"modal"},"關閉")],-1);function X(t,e,c,l,a,n){return Object(i["w"])(),Object(i["e"])("div",f,[Object(i["i"])("div",g,[Object(i["i"])("div",w,[Object(i["i"])("div",y,[Object(i["i"])("h5",v,[k,Object(i["i"])("span",null,Object(i["G"])(a.tempOrder.id),1)])]),Object(i["i"])("div",M,[Object(i["i"])("div",G,[$,Object(i["i"])("table",x,[a.tempOrder.user?(Object(i["w"])(),Object(i["e"])("tbody",_,[Object(i["i"])("tr",null,[P,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.name),1)]),Object(i["i"])("tr",null,[D,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.email),1)]),Object(i["i"])("tr",null,[C,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.tel),1)]),Object(i["i"])("tr",null,[L,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.address),1)])])):Object(i["f"])("",!0)])]),Object(i["i"])("div",E,[S,Object(i["i"])("table",B,[Object(i["i"])("tbody",null,[Object(i["i"])("tr",null,[J,Object(i["i"])("td",null,Object(i["G"])(t.$filters.date(a.tempOrder.create_at)),1)]),Object(i["i"])("tr",null,[q,Object(i["i"])("td",null,[a.tempOrder.paid_date?(Object(i["w"])(),Object(i["e"])("span",I,Object(i["G"])(t.$filters.date(a.tempOrder.paid_date)),1)):(Object(i["w"])(),Object(i["e"])("span",U,"時間不正確"))])]),Object(i["i"])("tr",null,[V,Object(i["i"])("td",null,[a.tempOrder.is_paid?(Object(i["w"])(),Object(i["e"])("strong",F,"已付款")):(Object(i["w"])(),Object(i["e"])("span",N,"尚未付款"))])]),Object(i["i"])("tr",null,[Q,Object(i["i"])("td",null,Object(i["G"])(t.$filters.currency(a.tempOrder.total)),1)])])])]),Object(i["i"])("div",null,[z,Object(i["i"])("table",A,[H,Object(i["i"])("tbody",null,[(Object(i["w"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(a.tempOrder.products,(function(e){return Object(i["w"])(),Object(i["e"])("tr",{key:e.id},[Object(i["i"])("th",null,Object(i["G"])(e.product.title),1),Object(i["i"])("td",null,Object(i["G"])(e.qty)+" / "+Object(i["G"])(e.product.unit),1),Object(i["i"])("td",K,Object(i["G"])(t.$filters.currency(e.final_total)),1),e.coupon?(Object(i["w"])(),Object(i["e"])("td",R," 使用優惠卷："+Object(i["G"])(e.coupon.code),1)):(Object(i["w"])(),Object(i["e"])("td",T,"無使用優惠卷"))])})),128))])])])]),W])])],512)}var Y=c("e0ae"),Z={name:"orderModal",props:{order:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",tempOrder:{}}},mixins:[Y["a"]],watch:{order:function(){this.tempOrder=this.order}}};c("cf21");Z.render=X;var tt=Z,et={data:function(){return{orders:{},pagination:{},tempOrder:{},currentPage:1}},components:{Pagination:h["a"],DelModal:m["a"],OrderModal:tt},inject:["emitter"],methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("best777","/admin/orders/?page=").concat(e);this.$store.dispatch("updateLoading",!0),this.$http.get(c).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination,t.$store.dispatch("updateLoading",!1)}))},updatePaid:function(t){var e=this;this.$store.dispatch("updateLoading",!0);var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("best777","/admin/orders/").concat(t.id),i={is_paid:t.is_paid};this.$http.put(c,{data:i}).then((function(t){e.$store.dispatch("updateLoading",!1),e.getOrders(e.currentPage)}))},openModal:function(t,e){this.tempOrder=Object(p["a"])({},e),this.isNew=!1;var c=this.$refs.orderModal;c.showModal()},delOrderModal:function(t){this.tempOrder=Object(p["a"])({},t);var e=this.$refs.delModal;e.showModal()},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("best777","/admin/order/").concat(this.tempOrder.id);this.$http.delete(e).then((function(e){var c=t.$refs.delModal;c.hideModal(),t.getOrders(t.currentPage),t.$httpMsgState(e,"刪除訂單")}))}},created:function(){this.getOrders()}};et.render=j;e["default"]=et},b0c0:function(t,e,c){var i=c("83ab"),l=c("9bf2").f,a=Function.prototype,n=a.toString,r=/^\s*function ([^ (]*)/,d="name";i&&!(d in a)&&l(a,d,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return""}}})},b64d:function(t,e,c){},cf21:function(t,e,c){"use strict";c("b64d")}}]);
//# sourceMappingURL=chunk-0e00b30a.1f19e4cf.js.map